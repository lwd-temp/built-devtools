{"version":3,"file":"CodeFrameSource.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/explain/sources/CodeFrameSource.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAI7B,MAAM,OAAO,eAAe;IAC1B,MAAM,CAA8C;IACpD,KAAK,CAAS;IAEd,YAAY,KAAkD;QAC5D,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,MAAM,EAAC,KAAK,EAAE,WAAW,EAAC,GAAG,KAAK,CAAC,UAAU,CAAC;QAC9C,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACpG,CAAC;IAED,SAAS;QACP,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,MAAM,EAAC,KAAK,EAAE,WAAW,EAAC,GAAG,KAAK,CAAC,UAAU,CAAC;QAC9C,MAAM,cAAc,GAAG,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC;QAClD,MAAM,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC5E,MAAM,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,EAAE;YAC/B,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;SACnC;QACD,OAAO,IAAI,SAAS,CAChB,UAAU,CAAC,IAAI,EAAE,UAAU,CAAC,GAAG,EAAE,WAAW,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,EAAE,WAAW,CAAC,MAAM,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;IACjH,CAAC;IAED,KAAK,CAAC,SAAS;QACb,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAiCT,IAAI,CAAC,KAAK;;iBAEK,CAAC;IAChB,CAAC;CACF","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Sources from '../../sources/sources.js';\n\nexport class CodeFrameSource {\n  #frame: Sources.UISourceCodeFrame.UISourceCodeFrame;\n  #code: string;\n\n  constructor(frame: Sources.UISourceCodeFrame.UISourceCodeFrame) {\n    this.#frame = frame;\n    const {state: editorState} = frame.textEditor;\n    this.#code = editorState.sliceDoc(editorState.selection.main.from, editorState.selection.main.to);\n  }\n\n  getAnchor(): AnchorBox {\n    const frame = this.#frame;\n    const {state: editorState} = frame.textEditor;\n    const selectionRange = editorState.selection.main;\n    const leftCorner = frame.textEditor.editor.coordsAtPos(selectionRange.from);\n    const rightCorner = frame.textEditor.editor.coordsAtPos(selectionRange.to);\n    if (!leftCorner || !rightCorner) {\n      throw new Error('no coordinates');\n    }\n    return new AnchorBox(\n        leftCorner.left, leftCorner.top, rightCorner.right - leftCorner.left, rightCorner.bottom - leftCorner.top);\n  }\n\n  async getPrompt(): Promise<string> {\n    return `You are an expert software engineer who debugs web applications.\nGiven some code, give an explanation of what the code does.\nStart with the explanation immediately and do not repeat the given code.\nRespond only with the explanation, no code.\n\n### Code:\nfunction removeArrayItem(input, valueToRemove) {\n  const index = input.indexOf(valueToRemove);\n  if (index > -1) {\n    input.splice(index, 1);\n  }\n  return input;\n}\n### Explanation:\nThis function removes the provided value from an array. Removes the first found value from the array and modifies the array in-place.\n\n---\n\n### Code:\nwindow.location.href = 'target.html';\n### Explanation:\nThe code navigates the page to a new URL.\n\n---\n\n### Code:\n\"target\".includes(\"r\")\n### Explanation:\nThe code checks if the string \\`\"target\"\\` has the \\`r\\` character in it.\n\n---\n\n### Code:\n${this.#code}\n\n### Explanation:`;\n  }\n}\n"]}