{"version":3,"file":"ActionDelegate.js","sourceRoot":"","sources":["../../../../../../front_end/panels/explain/ActionDelegate.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,KAAK,OAAO,MAAM,uBAAuB,CAAC;AACjD,OAAO,KAAK,OAAO,MAAM,uBAAuB,CAAC;AAEjD,OAAO,EAAC,cAAc,EAAC,MAAM,qBAAqB,CAAC;AACnD,OAAO,EAAC,eAAe,EAAC,MAAM,8BAA8B,CAAC;AAC7D,OAAO,EAAC,oBAAoB,EAAC,MAAM,mCAAmC,CAAC;AAEvE,IAAI,sBAAsC,CAAC;AAE3C,MAAM,OAAO,cAAc;IACzB,MAAM,CAAC,QAAQ,CAAC,OAEZ,EAAC,QAAQ,EAAE,IAAI,EAAC;QAClB,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,sBAAsB,IAAI,QAAQ,EAAE;YACvC,sBAAsB,GAAG,IAAI,cAAc,EAAE,CAAC;SAC/C;QAED,OAAO,sBAAsB,CAAC;IAChC,CAAC;IAED,YAAY,CAAC,QAA4B,EAAE,QAAgB;QACzD,QAAQ,QAAQ,EAAE;YAChB,KAAK,cAAc,CAAC,CAAC;gBACnB,MAAM,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;gBAChG,IAAI,KAAK,EAAE;oBACT,MAAM,OAAO,GAAG,IAAI,cAAc,CAAC,IAAI,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;oBAC/D,KAAK,OAAO,CAAC,IAAI,EAAE,CAAC;oBACpB,OAAO,IAAI,CAAC;iBACb;gBACD,OAAO,KAAK,CAAC;aACd;YACD,KAAK,wBAAwB,CAAC,CAAC;gBAC7B,MAAM,kBAAkB,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,CAAC;gBAC/G,IAAI,kBAAkB,EAAE;oBACtB,MAAM,OAAO,GAAG,IAAI,cAAc,CAAC,IAAI,oBAAoB,CAAC,kBAAkB,CAAC,CAAC,CAAC;oBACjF,KAAK,OAAO,CAAC,IAAI,EAAE,CAAC;oBACpB,OAAO,IAAI,CAAC;iBACb;gBACD,OAAO,KAAK,CAAC;aACd;SACF;QACD,OAAO,KAAK,CAAC;IACf,CAAC;CACF","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Console from '../console/console.js';\nimport * as Sources from '../sources/sources.js';\n\nimport {ExplainPopover} from './ExplainPopover.js';\nimport {CodeFrameSource} from './sources/CodeFrameSource.js';\nimport {ConsoleMessageSource} from './sources/ConsoleMessageSource.js';\n\nlet actionDelegateInstance: ActionDelegate;\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): ActionDelegate {\n    const {forceNew} = opts;\n    if (!actionDelegateInstance || forceNew) {\n      actionDelegateInstance = new ActionDelegate();\n    }\n\n    return actionDelegateInstance;\n  }\n\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'explain.code': {\n        const frame = UI.Context.Context.instance().flavor(Sources.UISourceCodeFrame.UISourceCodeFrame);\n        if (frame) {\n          const popover = new ExplainPopover(new CodeFrameSource(frame));\n          void popover.show();\n          return true;\n        }\n        return false;\n      }\n      case 'explain.consoleMessage': {\n        const consoleViewMessage = UI.Context.Context.instance().flavor(Console.ConsoleViewMessage.ConsoleViewMessage);\n        if (consoleViewMessage) {\n          const popover = new ExplainPopover(new ConsoleMessageSource(consoleViewMessage));\n          void popover.show();\n          return true;\n        }\n        return false;\n      }\n    }\n    return false;\n  }\n}\n"]}